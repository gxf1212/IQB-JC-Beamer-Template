%!TEX root = document.tex

\section{使用指南}

\Name 是一个功能完整的学术演示文稿 LaTeX Beamer 模板，专为 IQB Lab 日志会（Journal Club）汇报设计。通过提供预设的主题、布局工具包和丰富的内容模块，用户可以快速创建专业、美观的学术幻灯片演示。本章详细说明该模板的使用方法，涵盖基础配置、核心功能模块和实际应用示例。

\subsection{基础使用与最小示例}

\subsubsection{最小示例代码}

以下是创建一个完整演示文稿的最小示例。用户可以以此为起点进行扩展：

\begin{lstlisting}[style=blockstyle,language=TeX]
\documentclass[aspectratio=169,11pt]{beamer}

% 加载 IQB 主题和布局工具包
\usepackage{theme/beamerthemeiqb}
\usepackage{theme/iqb-layouts}

% 设置 header 图片路径
\renewcommand{\iqbheaderimage}{theme/images/header.png}

% 中文支持（使用 XeLaTeX 编译）
\usepackage{xeCJK}
\setCJKmainfont{SimSun}

% 文档元数据
\title{你的演示标题}
\subtitle{副标题（可选）}
\author{你的名字}
\institute{IQB Lab}
\date{\today}

\begin{document}

% 封面页（无 header/footer）
\begin{frame}[plain,noframenumbering]
  \titlepage
\end{frame}

% 内容页示例
\setsection{Background}
\begin{frame}{第一页内容}
  \begin{itemize}
    \item 要点 1
    \item 要点 2
    \item 要点 3
  \end{itemize}
\end{frame}

% 致谢页（无 header/footer）
\begin{frame}[plain]
  \centering
  {\Huge Thank You!}
\end{frame}

\end{document}
\end{lstlisting}

\subsubsection{编译方法}

使用 XeLaTeX 编译器（推荐，支持中文）：

\begin{lstlisting}[style=blockstyle,language=bash]
xelatex -interaction=nonstopmode your-presentation.tex
\end{lstlisting}

若需要生成含交叉引用的完整 PDF，需运行两次编译：

\begin{lstlisting}[style=blockstyle,language=bash]
xelatex -interaction=nonstopmode your-presentation.tex
xelatex -interaction=nonstopmode your-presentation.tex
\end{lstlisting}

\subsubsection{文档类选项说明}

表格 \ref{tab:documentclass-options} 列出了常用的文档类选项及其含义。

\begin{table}[!h]
\centering
\caption{Beamer 文档类常用选项}
\label{tab:documentclass-options}
\begin{tabular}{p{3.5cm}p{9.5cm}}
\toprule
\textbf{选项} & \textbf{说明} \\
\midrule
\lstinline|aspectratio=169| & 设置幻灯片宽高比为 16:9（推荐用于现代显示器） \\
\lstinline|aspectratio=43| & 设置幻灯片宽高比为 4:3（传统比例） \\
\lstinline|11pt| & 设置基础字体大小为 11pt \\
\lstinline|12pt| & 设置基础字体大小为 12pt（默认） \\
\bottomrule
\end{tabular}
\end{table}

\subsubsection{中文支持配置}

模板使用 XeLaTeX + xeCJK 实现中文支持。在导言区添加以下代码：

\begin{lstlisting}[style=blockstyle,language=TeX]
\usepackage{xeCJK}
\setCJKmainfont{SimSun}    % Windows 系统
% 或
\setCJKmainfont{Noto Sans CJK SC}  % Linux 系统
\end{lstlisting}

若在 macOS 系统上使用，可选择以下字体：

\begin{lstlisting}[style=blockstyle,language=TeX]
\setCJKmainfont{STHeiti}   % macOS 默认字体
\end{lstlisting}

\subsection{页面结构控制}

IQB-JC Beamer 模板具有三种页面类型：封面页、标准内容页和特殊页面（如致谢页）。

\subsubsection{页面类型详解}

表格 \ref{tab:frame-types} 总结了不同页面类型的特性及适用场景。

\begin{table}[!h]
\centering
\caption{IQB-JC 模板中的页面类型}
\label{tab:frame-types}
\begin{tabular}{p{2.5cm}p{3cm}p{3cm}p{4cm}}
\toprule
\textbf{页面类型} & \textbf{Header 显示} & \textbf{Footer 显示} & \textbf{应用场景} \\
\midrule
标准内容页 & 是 & 是 & 演示主要内容 \\
Plain 页面 & 否 & 否 & 封面、致谢、转场页 \\
\bottomrule
\end{tabular}
\end{table}

\subsubsection{标准内容页}

标准内容页同时显示 header 横幅和 footer 三段式设计。使用如下方式创建：

\begin{lstlisting}[style=blockstyle,language=TeX]
\setsection{Methods}  % 设置 footer 中间的 section 标识
\begin{frame}{页面标题}
  页面内容
\end{frame}
\end{lstlisting}

其中 \lstinline|\setsection{}| 命令设置 footer 中间部分显示的章节名称。该设置对后续所有页面有效，直到被重新设置。

\subsubsection{Plain 页面（无 Header/Footer）}

Plain 页面隐藏 header 和 footer，适用于封面、致谢等特殊页面。创建方式如下：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}[plain,noframenumbering]
  \titlepage
\end{frame}
\end{lstlisting}

其中：

\begin{itemize}
\item \lstinline|[plain]| - 隐藏 header、footer 和页码
\item \lstinline|[noframenumbering]| - 不计入总页数统计（适用于封面、致谢等）
\end{itemize}

\subsubsection{Footer Section 设置}

Footer 底部的三段式设计包含：左侧固定文字 "IQB Lab"、中间 section 标识、右侧页码显示。使用 \lstinline|\setsection{}| 命令管理中间部分：

\begin{lstlisting}[style=blockstyle,language=TeX]
\setsection{Background}
\begin{frame}{背景介绍}
  % footer 中间显示 "Background"
\end{frame}

\setsection{Methods}
\begin{frame}{研究方法}
  % footer 中间显示 "Methods"
\end{frame}
\end{lstlisting}

建议在每个主要章节的第一页调用 \lstinline|\setsection{}| 命令以保持 footer 信息的准确性。

\subsection{主题自定义}

\subsubsection{修改主题颜色}

IQB-JC 模板的主题颜色定义在 \lstinline|theme/beamerthemeiqb.sty| 文件中。主要颜色包括：

\begin{table}[!h]
\centering
\caption{IQB-JC 主题颜色定义}
\label{tab:theme-colors}
\begin{tabular}{p{3cm}p{4cm}p{4cm}}
\toprule
\textbf{颜色名称} & \textbf{RGB 值} & \textbf{十六进制} \\
\midrule
\lstinline|iqbblue| & 0, 51, 102 & \#003366 \\
\lstinline|iqbgray| & 85, 85, 85 & \#555555 \\
\lstinline|iqblightgray| & 240, 240, 240 & \#F0F0F0 \\
\bottomrule
\end{tabular}
\end{table}

若要修改主题颜色，可在导言区添加颜色重定义：

\begin{lstlisting}[style=blockstyle,language=TeX]
\definecolor{iqbblue}{RGB}{0, 100, 200}  % 自定义蓝色
\definecolor{iqbgray}{RGB}{100, 100, 100}  % 自定义灰色
\end{lstlisting}

\subsubsection{替换 Header 图片}

Header 横幅图片可通过重新定义 \lstinline|\iqbheaderimage| 命令更改：

\begin{lstlisting}[style=blockstyle,language=TeX]
\renewcommand{\iqbheaderimage}{path/to/your/header.png}
\end{lstlisting}

建议的 header 图片规格：

\begin{itemize}
\item 分辨率：1999×204 像素（保持原始 1999:204 比例）
\item 宽高比：约 9.8:1
\item 格式：PNG 或 PDF（支持透明度）
\end{itemize}

\subsubsection{调整字体大小}

模板统一采用以下字体层级（单位为 pt）：

\begin{table}[!h]
\centering
\caption{IQB-JC 字体大小体系}
\label{tab:font-sizes}
\begin{tabular}{p{4cm}p{2cm}p{6cm}}
\toprule
\textbf{文本类型} & \textbf{字号} & \textbf{说明} \\
\midrule
封面标题（\lstinline|\title|） & 14.4pt & 使用 \lstinline|\Large| + \lstinline|\bfseries| \\
页面标题（\lstinline|\frametitle|） & 12pt & 使用 \lstinline|\large| + \lstinline|\bfseries| \\
正文（默认） & 8pt & 使用 \lstinline|\scriptsize| \\
脚注/Footer & 5pt & 使用 \lstinline|\tiny| \\
\bottomrule
\end{tabular}
\end{table}

若要修改全局字体大小，在 \lstinline|theme/beamerthemeiqb.sty| 中查找 \lstinline|\setbeamerfont| 命令进行调整。

\subsection{多列布局模块}

IQB-JC 模板通过 \lstinline|iqb-layouts.sty| 包提供了多种预设布局工具，满足不同的内容排版需求。

\subsubsection{双列布局（50-50）}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqblayouttwo{左列内容}{右列内容}
\end{lstlisting}

该命令将页面平均分为两列，各占 48\% 宽度，中间留 4\% 间距。适用于并行展示两个相关内容的场景。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{双列对比}
  \iqblayouttwo{
    \textbf{方法 A}
    \begin{itemize}
      \item 优点 1
      \item 优点 2
    \end{itemize}
  }{
    \textbf{方法 B}
    \begin{itemize}
      \item 优点 1
      \item 优点 2
    \end{itemize}
  }
\end{frame}
\end{lstlisting}

\subsubsection{不对称双列布局}

\textbf{1/3 + 2/3 布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqblayoutonethird{左列内容（占 31\%）}{右列内容（占 65\%）}
\end{lstlisting}

该布局将页面分为 31\% 和 65\% 两列，适合在右侧放置大图，左侧放置说明文字。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{竖版图片布局}
  \iqblayoutonethird{
    \textbf{说明文字}

    该图展示了关键结果
  }{
    \includegraphics[height=0.6\textheight,keepaspectratio]{image.png}
  }
\end{frame}
\end{lstlisting}

\textbf{2/3 + 1/3 布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqblayouttwothirds{左列内容（占 65\%）}{右列内容（占 31\%）}
\end{lstlisting}

该布局与上述布局对称，适合在左侧放置大图，右侧放置说明文字。

\subsubsection{三列布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqblayoutthree{左列内容}{中列内容}{右列内容}
\end{lstlisting}

将页面平均分为三列，各占 31\% 宽度。适合展示三个平行的内容或对比三种方法。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{三方法对比}
  \iqblayoutthree{
    \textbf{方法 A}

    优点与缺点分析
  }{
    \textbf{方法 B}

    优点与缺点分析
  }{
    \textbf{方法 C}

    优点与缺点分析
  }
\end{frame}
\end{lstlisting}

\subsection{网格与图表布局}

\subsubsection{2×2 网格布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbgridtwobytwo{左上}{右上}{左下}{右下}
\end{lstlisting}

该布局适合展示四个相关的图片或内容块，自动排列成 2×2 网格。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{四个关键结果}
  \iqbgridtwobytwo{
    \includegraphics[height=0.35\textheight]{fig1.png}
  }{
    \includegraphics[height=0.35\textheight]{fig2.png}
  }{
    \includegraphics[height=0.35\textheight]{fig3.png}
  }{
    \includegraphics[height=0.35\textheight]{fig4.png}
  }
\end{frame}
\end{lstlisting}

\subsubsection{3×2 网格布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbgridthreebytwo{左上}{中上}{右上}{左下}{中下}{右下}
\end{lstlisting}

该布局展示六个内容块，排列为 3 列 2 行。各列占 31\% 宽度，垂直间距为 0.5em。

\subsection{图文混排模块}

\subsubsection{图片左、文字右}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbimagetext[图片选项]{图片路径}{右侧文字内容}
\end{lstlisting}

默认图片选项为 \lstinline|width=0.45\textwidth|。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{实验结果}
  \iqbimagetext[width=0.4\textwidth]{experiment.png}{
    \textbf{关键发现：}
    \begin{itemize}
      \item 发现 1
      \item 发现 2
      \item 发现 3
    \end{itemize}
  }
\end{frame}
\end{lstlisting}

\subsubsection{文字左、图片右}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbtextimage[图片选项]{左侧文字内容}{图片路径}
\end{lstlisting}

这是上述布局的镜像版本，文字显示在左列，图片显示在右列。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{方法流程}
  \iqbtextimage[height=0.55\textheight]{
    \textbf{研究步骤：}
    \begin{enumerate}
      \item 数据收集
      \item 预处理
      \item 分析
    \end{enumerate}
  }{flowchart.png}
\end{frame}
\end{lstlisting}

\subsection{图表模块（自动编号）}

IQB-JC 模板提供了带自动编号和统一格式的图表模块。所有图表自动生成"图X："格式的编号，caption 左对齐显示。

\subsubsection{单图模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbfig[height=0.5\textheight]{图片路径}{图说文字}
\end{lstlisting}

参数说明见表格 \ref{tab:iqbfig-params}。

\begin{table}[!h]
\centering
\caption{\lstinline|\iqbfig| 命令参数}
\label{tab:iqbfig-params}
\begin{tabular}{p{2.5cm}p{2.5cm}p{8cm}}
\toprule
\textbf{参数} & \textbf{默认值} & \textbf{说明} \\
\midrule
\lstinline|[选项]| & \lstinline|height=0.5\textheight| & 图片尺寸，支持 \lstinline|height| 或 \lstinline|width| \\
图片路径 & 必需 & 相对或绝对路径，支持 PNG/PDF \\
图说文字 & 必需 & 图片下方的说明文字，自动编号 \\
\bottomrule
\end{tabular}
\end{table}

使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{单图展示}
  \iqbfig[height=0.55\textheight]{results.png}{
    结果展示图：实验数据对比分析
  }
\end{frame}
\end{lstlisting}

\subsubsection{双图模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbtwofig[height=0.45\textheight]{img1}{caption1}{img2}{caption2}
\end{lstlisting}

该模块将两张图片并排显示，各占 48\% 宽度。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{双图对比}
  \iqbtwofig[height=0.5\textheight]{
    method_a.png
  }{
    方法 A 的结果展示
  }{
    method_b.png
  }{
    方法 B 的结果展示
  }
\end{frame}
\end{lstlisting}

\subsubsection{三图模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbthreefig[height=0.35\textheight]{img1}{cap1}{img2}{cap2}{img3}{cap3}
\end{lstlisting}

三张图片均匀分布在一行，各占 31\% 宽度。该布局适合展示三个相关的分析结果。

\subsubsection{四图网格模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbfourfig[height=0.35\textheight]{
  img1}{cap1}{img2}{cap2}{img3}{cap3}{img4}{cap4}
\end{lstlisting}

四张图片排列为 2×2 网格。该布局提供清晰的图表组织方式，适合展示多阶段或多方法的结果对比。

\subsection{作者信息模块}

IQB-JC 模板提供了专门的作者信息展示模块，适用于文献汇报时介绍论文作者的信息。

\subsubsection{双作者模块（无照片）}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbauthorstwo{
  通讯作者姓名}{通讯作者单位}{通讯作者网址}{通讯作者研究方向}{
  第一作者姓名}{第一作者单位}{第一作者网址}{第一作者研究方向
}
\end{lstlisting}

该模块以 50-50 双列布局展示通讯作者和第一作者的信息。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{作者信息}
  \iqbauthorstwo{
    Prof. John Smith
  }{
    Department of Biology\\
    University of Example
  }{
    https://example.edu/smith
  }{
    Molecular dynamics, Protein folding
  }{
    Dr. Jane Doe
  }{
    Institute of Computational Science\\
    Example University
  }{
    https://example.edu/doe
  }{
    MD simulations, Free energy calculations
  }
\end{frame}
\end{lstlisting}

\subsubsection{双作者模块（带照片）}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\setauthorfirstfield{第一作者研究领域}
\iqbauthorstwophoto{
  通讯作者照片路径}{通讯作者姓名}{...}{...}{通讯作者研究方向}{
  第一作者照片路径}{第一作者姓名}{...}{...}
}
\end{lstlisting}

使用 \lstinline|\setauthorfirstfield{}| 命令单独设置第一作者的专业领域。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{论文作者}
  \setauthorfirstfield{计算生物物理、膜蛋白模拟、自由能计算}
  \iqbauthorstwophoto{
    author1.jpg
  }{
    Prof. Alice Brown
  }{
    College of Science\\
    Tech University
  }{
    https://example.org/alice
  }{
    Protein structure prediction, Force field development
  }{
    author2.jpg
  }{
    Dr. Bob White
  }{
    Center for Molecular Dynamics\\
    Research Institute
  }{
    https://example.org/bob
  }
\end{frame}
\end{lstlisting}

\subsubsection{单作者模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbauthorone{作者姓名}{作者单位}{作者网址}{研究方向}
\end{lstlisting}

该模块适用于单作者论文或特邀评论文章。信息居中显示。

\subsection{内容模块}

\subsubsection{关键要点模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbkeypoints{
  \begin{itemize}
    \item 要点 1
    \item 要点 2
  \end{itemize}
}
\end{lstlisting}

该模块将内容包装在突出显示的 block 环境中，背景色为 IQB 浅灰色，标题为"关键要点"。适合提炼每页的核心内容。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{研究成果}
  \iqbkeypoints{
    \begin{itemize}
      \item 发现了新的分子动力学计算方法
      \item 提高了计算精度 50\%
      \item 减少了计算时间 30\%
    \end{itemize}
  }
\end{frame}
\end{lstlisting}

\subsubsection{核心问题模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbquestion{该项研究的核心问题是什么？}
\end{lstlisting}

该模块突出显示研究的核心科学问题，文字居中排列。适合在研究背景部分强调关键问题。

\subsubsection{结论模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbconclusion{
  通过 XX 方法，我们发现了 YY 现象，为 ZZ 领域的发展奠定了基础。
}
\end{lstlisting}

该模块用于总结研究的主要结论，适合放在讨论或总结页面。文字自动居中显示。

\subsection{高级功能模块}

\subsubsection{公式与解释布局}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbformulaexplain{公式内容}{公式右侧解释文字}
\end{lstlisting}

该模块采用 1/3 + 2/3 布局，左侧放置公式（居中），右侧放置解释说明。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{关键公式推导}
  \iqbformulaexplain{
    $\Delta G = \Delta H - T\Delta S$
  }{
    \textbf{含义：}
    \begin{itemize}
      \item $\Delta G$ 是自由能变化
      \item $\Delta H$ 是焓变
      \item $T\Delta S$ 是熵项贡献
    \end{itemize}
  }
\end{frame}
\end{lstlisting}

\subsubsection{时间线/流程图模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbtimeline{步骤1标题}{步骤1内容}{步骤2标题}{步骤2内容}{
  步骤3标题}{步骤3内容}
\end{lstlisting}

该模块创建一个三步的流程图，使用 TikZ 绘制连接的方框。每个方框包含标题和内容，步骤间有箭头连接。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{研究方法流程}
  \iqbtimeline{
    数据采集}{收集 1000 个样本}{
    数据处理}{质量控制与预处理}{
    统计分析}{方差分析与回归
  }
\end{frame}
\end{lstlisting}

\subsubsection{双列对比模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbcomparetwo{标题 A}{内容 A}{标题 B}{内容 B}
\end{lstlisting}

该模块在双列布局中展示两个方法或方案的对比。每列包含标题和内容，自动对齐。

\subsubsection{三列对比模块}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbcomparethree{标题A}{内容A}{标题B}{内容B}{标题C}{内容C}
\end{lstlisting}

该模块采用三列布局展示三个方法或方案的对比分析。

\subsubsection{精确定位（高级）}

对于需要自定义精确布局的情况，模板提供了底层的定位工具。

\textbf{文本精确定位}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbplace{x}{y}{宽度}{内容}
\end{lstlisting}

其中坐标 (0,0) 为页面左上角，x 和 y 单位为 cm。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{}
  \iqbplace{2}{3}{10cm}{
    自定义位置的文本内容
  }
\end{frame}
\end{lstlisting}

\textbf{图片精确定位}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbplaceimage{x}{y}{宽度}{高度}{图片路径}
\end{lstlisting}

\subsection{实际应用指南}

\subsubsection{完整演示文稿示例}

基于以上模块，以下展示了一个包含多种布局的完整页面示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\documentclass[aspectratio=169,11pt]{beamer}
\usepackage{theme/beamerthemeiqb}
\usepackage{theme/iqb-layouts}
\usepackage{xeCJK}
\setCJKmainfont{SimSun}

\title{膜孔自由能与稳定性研究}
\author{研究人员}
\institute{IQB Lab}

\begin{document}

% 第 1 页：封面
\begin{frame}[plain,noframenumbering]
  \titlepage
\end{frame}

% 第 2 页：背景介绍
\setsection{Background}
\begin{frame}{研究背景}
  \iqbquestion{膜孔形成的分子机制是什么？}
\end{frame}

% 第 3 页：双列对比
\begin{frame}{两种研究方法对比}
  \iqbcomparetwo{
    方法 A：全原子 MD}{优点与局限}{
    方法 B：粗粒化 MD}{优点与局限
  }
\end{frame}

% 第 4 页：图表展示
\begin{frame}{主要结果}
  \iqbtwofig[height=0.5\textheight]{
    result_a.png}{结果 A 展示}{
    result_b.png}{结果 B 展示
  }
\end{frame}

% 第 5 页：作者信息
\setsection{Author}
\begin{frame}{论文作者}
  \setauthorfirstfield{计算生物物理、自由能计算}
  \iqbauthorstwophoto{
    author1.jpg}{Prof. Smith}{Dept of Bio\\University A}{
    https://example.edu}{Protein folding}{
    author2.jpg}{Dr. Doe}{Institute B}{
    https://example.edu
  }
\end{frame}

% 最后一页：致谢
\begin{frame}[plain]
  \centering
  {\Huge Thank You!}
\end{frame}

\end{document}
\end{lstlisting}

\subsubsection{布局选择建议}

表格 \ref{tab:layout-selection} 提供了在不同内容类型下的布局选择建议。

\begin{table}[!h]
\centering
\caption{不同内容类型的布局选择}
\label{tab:layout-selection}
\begin{tabular}{p{3cm}p{3cm}p{6cm}}
\toprule
\textbf{内容类型} & \textbf{推荐布局} & \textbf{说明} \\
\midrule
并行对比 & 双列 50-50 & 两个等权内容 \\
图文结合 & 1/3+2/3 & 竖版图片 + 说明 \\
多个独立内容 & 三列或网格 & 3 个或 4 个内容 \\
方法流程 & 时间线 & 流程步骤展示 \\
关键信息 & 关键要点 & 突出核心发现 \\
\bottomrule
\end{tabular}
\end{table}

\subsubsection{常见问题与解决方案}

\textbf{Q1：页面内容溢出}

若页面内容过多导致溢出，建议：
\begin{itemize}
\item 减少列表项数量，提炼关键要点
\item 调整图片高度参数
\item 使用更紧凑的布局（如三列代替双列）
\item 将内容拆分为两页
\end{itemize}

\textbf{Q2：图片显示不完整}

检查以下几点：
\begin{itemize}
\item 图片路径是否正确（相对/绝对路径）
\item 图片格式是否支持（建议 PNG/PDF）
\item 高度/宽度参数是否过小
\item 尝试使用 \lstinline|keepaspectratio| 保持宽高比
\end{itemize}

\textbf{Q3：中文显示乱码}

确保：
\begin{itemize}
\item 使用 XeLaTeX 编译器
\item 字体设置正确（Windows 用 SimSun，Linux 用 Noto Sans CJK SC）
\item 文件编码为 UTF-8
\end{itemize}

\textbf{Q4：Footer 页码显示错误}

使用 \lstinline|[noframenumbering]| 选项排除不计页数的页面，确保页码准确。

\subsection{Phase 1: 高级快捷命令（Advanced Shortcuts）}

\subsubsection{概述}

为了进一步简化用户编写，模板在 \lstinline|iqb-layouts.sty| 中提供了一系列高级宏命令。这些命令将常见的Frame模式标准化和模板化，显著减少代码重复，提升编写效率。所有新命令与现有代码完全兼容，用户可以渐进式采用。

\subsubsection{Frame 快捷命令}

\textbf{标准 Frame}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframe{标题}{内容}
\end{lstlisting}

用于快速创建标准单栏 frame，相比原始写法减少 67\% 的代码。

\textbf{文字+图片 Frame（左文右图）}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframetextfig[高度]{标题}{文字内容}{图片路径}
\end{lstlisting}

自动应用 1/3 左 + 2/3 右的布局。可选参数 \lstinline|[高度]| 默认为 \lstinline|0.55\textheight|。

使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframetextfig{膜孔形成的重要性}{
  \textbf{应用领域}：
  \begin{itemize}
    \item 抗菌肽设计
    \item 药物递送系统
    \item 细胞通透性调控
  \end{itemize}
}{images/membrane-pore.png}
\end{lstlisting}

\textbf{图片+文字 Frame（左图右文）}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframefigttext[高度]{标题}{图片路径}{文字内容}
\end{lstlisting}

图片占 1/3 左，文字占 2/3 右。

\textbf{文字+双图 Frame}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframetexttwofig[高度]{标题}{文字}{img1}{cap1}{img2}{cap2}
\end{lstlisting}

文字占 1/3 左，两张并排的图片占 2/3 右。

\subsubsection{Section 管理快捷}

\textbf{自动 Section 分隔页}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbsectionframe{SectionName}{中文标题}
\end{lstlisting}

自动生成 section 分隔页，并更新 footer 中的 section 进度标识，无需手动调用 \lstinline|\setsection|。

使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbsectionframe{Methods}{方法}
% 后续该 section 下的 frame 会自动显示 "Methods" 在 footer 中

\iqbsectionframe{Results}{结果}
% section 切换，footer 自动更新
\end{lstlisting}

\subsubsection{公式+解释专用布局}

\textbf{公式 Frame}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbformulaframe{标题}{公式内容}{右侧图文}
\end{lstlisting}

左侧 1/3 放置公式推导，右侧 2/3 放置图片或补充说明。代码量减少 70\%。

\textbf{公式块辅助命令}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbformblock{标题}{公式}{解释}
\end{lstlisting}

自动管理公式块的间距和字体。使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbformulaframe{Full-Path CV 原理}{
  \iqbformblock{成核部分 $\text{CV}_{\text{cyl}}$}{
    $$\text{CV}_{\text{cyl}} = 1 - d/\text{CV}_{\text{eq}}$$
  }{$d$: 圆柱内脂质尾部原子数}

  \iqbformblock{扩展部分 $\text{CV}_{\text{radius}}$}{
    $$\text{CV}_{\text{radius}} = r_{\text{min}}/r_{\text{unit}}$$
  }{$r_{\text{min}}$: 孔中心到最近脂质距离}
}{
  \iqbfig[height=0.55\textheight]{fig1.png}{集体变量示意图}
}
\end{lstlisting}

\subsubsection{对比展示快捷}

\textbf{三列对比}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbthreecolcompare{title1}{img1}{items1}{title2}{img2}{items2}{title3}{img3}{content3}
\end{lstlisting}

三列均匀分布，每列可包含标题、图片、列表。代码量减少 83\%。

使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\begin{frame}{创新方法对比}
  \iqbthreecolcompare
    {Full-Path CV}{fig1u.png}{\item 成核+扩展统一 \item 无滞后}
    {Rapid CV}{fig1d.png}{\item 无限孔模拟 \item 效率高 10×}
    {开源实现}{plumed.png}{PLUMED 库\\GROMACS/LAMMPS}
\end{frame}
\end{lstlisting}

\textbf{双列对比}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbtwocolcompare{title1}{img1}{items1}{title2}{img2}{items2}
\end{lstlisting}

\subsubsection{结果展示快捷}

\textbf{结果展示 Frame}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbresultframe{标题}{左侧文字}{右侧图片}
\end{lstlisting}

左侧 1/3 放置关键发现和数据，右侧 2/3 放置结果图片。代码量减少 80\%。

使用示例：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbresultframe{孔闭合过程分析}{
  \textbf{四阶段闭合}：
  \begin{enumerate}
    \item 平衡孔：初始稳定孔，连续水柱贯穿膜
    \item 半径缩小：孔边缘脂质重排，结构保持
    \item 水线程：闭合最后瞬间，仅剩连续水线
    \item 膜变薄：孔完全闭合，局部膜缺陷
  \end{enumerate}

  \textbf{关键发现}：脂质尾部密度与孔寿命强相关 (R²=0.82)
}{images/closure.png}
\end{lstlisting}

\textbf{对比结果 Frame}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbcomparisonframe{标题}{左图}{左标题}{右图}{右标题}
\end{lstlisting}

并排展示两个对比结果，自动编号图片。代码量减少 90\%。

\subsubsection{块级快捷命令}

\textbf{快速创建 Block}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbblock{标题}{内容}
\end{lstlisting}

替代冗长的 \lstinline|\begin{block}...\end{block}| 写法。

\textbf{快速创建列表}

命令格式：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbitemize{\item 项1 \item 项2 \item 项3}

\iqbenumerate{\item 项1 \item 项2 \item 项3}
\end{lstlisting}

\subsubsection{VSCode Snippets 集成}

配置文件位置：\lstinline|.vscode/latex.code-snippets|

在 VSCode 中使用快捷方式，输入缩写后按 Tab 键自动展开完整命令模板：

\begin{table}[!h]
\centering
\caption{VSCode Snippets 快捷方式列表}
\label{tab:vscode-snippets}
\begin{tabular}{p{2cm}p{3cm}p{6cm}}
\toprule
\textbf{快捷方式} & \textbf{对应命令} & \textbf{功能说明} \\
\midrule
\lstinline|iqbf| & \lstinline|\iqbframe| & 快速创建标准 frame \\
\lstinline|iqbtf| & \lstinline|\iqbframetextfig| & 文字+图片 frame \\
\lstinline|iqbfit| & \lstinline|\iqbframefigttext| & 图片+文字 frame \\
\lstinline|iqbff| & \lstinline|\iqbformulaframe| & 公式+解释 frame \\
\lstinline|iqbsec| & \lstinline|\iqbsectionframe| & Section 分隔页 \\
\lstinline|iqb3c| & \lstinline|\iqbthreecolcompare| & 三列对比 \\
\lstinline|iqb2c| & \lstinline|\iqbtwocolcompare| & 双列对比 \\
\lstinline|iqbrf| & \lstinline|\iqbresultframe| & 结果展示 \\
\lstinline|iqbcf| & \lstinline|\iqbcomparisonframe| & 对比结果 \\
\lstinline|iqbitem| & \lstinline|\iqbitemize| & 列表 \\
\lstinline|iqbenum| & \lstinline|\iqbenumerate| & 编号列表 \\
\lstinline|iqbfb| & \lstinline|\iqbformblock| & 公式块 \\
\bottomrule
\end{tabular}
\end{table}

使用示例：在 VSCode 中输入 \lstinline|iqbtf| 并按 Tab，自动展开为：

\begin{lstlisting}[style=blockstyle,language=TeX]
\iqbframetextfig{标题}{
  文字内容...
}{images/xxx.png}
\end{lstlisting}

\subsubsection{使用建议与最佳实践}

\begin{itemize}
\item \textbf{优先使用快捷命令}：在日常编写中优先采用快捷命令，保持代码简洁明了。
\item \textbf{灵活使用可选参数}：大多数命令支持可选参数微调，如 \lstinline|[0.6\textheight]| 自定义图片高度。
\item \textbf{完全兼容旧代码}：新命令与现有代码完全兼容，现有幻灯片无需修改。
\item \textbf{IDE 集成}：配合 VSCode 和 Snippets 获得最佳编写体验。
\item \textbf{图注管理}：每个图片都应有图注，可以是详细描述或文字解读。当图片非常高时，可以在旁边文字栏中编写解释。
\end{itemize}

\subsubsection{代码改进效果统计}

表格 \ref{tab:code-improvement} 展示了使用快捷命令后的代码行数改进。平均而言，使用这些快捷命令可将代码量减少约 79\%。

\begin{table}[!h]
\centering
\caption{快捷命令代码改进统计}
\label{tab:code-improvement}
\begin{tabular}{lcccr}
\toprule
\textbf{模板类型} & \textbf{改进前} & \textbf{改进后} & \textbf{减少} & \textbf{对应命令} \\
\midrule
标准 Frame & 3 行 & 1 行 & 67\% & \lstinline|\iqbframe| \\
文字+图片 & 6 行 & 1 行 & 83\% & \lstinline|\iqbframetextfig| \\
公式+解释 & 40 行 & 12 行 & 70\% & \lstinline|\iqbformulaframe| \\
三列对比 & 48 行 & 8 行 & 83\% & \lstinline|\iqbthreecolcompare| \\
结果展示 & 15 行 & 3 行 & 80\% & \lstinline|\iqbresultframe| \\
对比结果 & 10 行 & 1 行 & 90\% & \lstinline|\iqbcomparisonframe| \\
\midrule
\textbf{平均} & - & - & \textbf{79\%} & - \\
\bottomrule
\end{tabular}
\end{table}

对于一个典型的 14 页 Journal Club 演示，使用快捷命令可以将源代码从约 270 行减少至 80 行，显著提升维护效率和可读性。
